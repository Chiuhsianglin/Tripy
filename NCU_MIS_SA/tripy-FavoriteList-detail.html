<!DOCTYPE html>
<html lang="en">
  <head>
    <title>tripy</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/bootstrap/css/bootstrap.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="fonts/font-awesome-4.7.0/css/font-awesome.min.css"
    />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/css-hamburgers/hamburgers.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/animsition/css/animsition.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/revolution/css/layers.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/revolution/css/navigation.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/revolution/css/settings.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/select2/select2.min.css"
    />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/slick/slick.css" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/MagnificPopup/magnific-popup.css"
    />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/util.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <!--===============================================================================================-->
  </head>
  <body class="animsition">
    <!-- Header -->
    <header>
      <!-- Header desktop -->
      <nav class="container-header-desktop">
        <div class="wrap-menu-desktop">
          <div class="limiter-menu-desktop container">
            <!-- Logo desktop -->
            <div class="logo">
              <a href="index.html"
                ><img src="images/icons/newlogo.png" alt="LOGO"
              /></a>
            </div>

            <!-- Menu desktop -->
            <div class="menu-desktop">
              <ul class="main-menu respon-sub-menu">
                <li>
                  <a href="tripy-FavoriteList.html" style="font-weight: bold"
                    >景點</a
                  >
                </li>

                <li>
                  <a href="tripy-StartPlanning.html" style="font-weight: bold"
                    >觀光行程</a
                  >
                </li>

                <li>
                  <a href="tripy-FavoriteList.html" style="font-weight: bold"
                    >我的收藏</a
                  >
                </li>

                <li>
                  <a href="tripy-login.html" style="font-weight: bold">登入</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>
      <style>
        .kit-underline1 {
          position: relative;
        }

        .kit-underline1::after {
          content: "";
          display: block;
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 2px;
          background-color: #ddd;
          border-left: 70px solid #05233a;
        }

        .size-a-105 {
          width: 100%;
          height: 2px;
        }
      </style>
    </header>

    <section class="bg-0 p-b-40">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-sm-10 col-md-4 col-lg-10 p-b-30">
            <div>
              <div class="row justify-content-between align-items-center">
                <div class="col-auto p-b-50" name="back">
                  <a
                    href="index.html"
                    class="size-a-1 d-inline-flex flex-c-c bg-11 t1-s-2 text-uppercase cl-0 hov-btn1 trans-02 m-t-20"
                  >
                    返回
                    <i class="fa fa-long-arrow-left m-l-15"></i>
                  </a>
                </div>
                <div
                  class="col-auto flex-col-c-c p-b-50"
                  style="position: absolute; left: 360px"
                >
                  <h3
                    class="t1-b-1 cl-3 txt-center m-b-11"
                    id="title_name"
                  ></h3>
                  <div class="size-a-2 bg-3"></div>
                </div>
              </div>

              <div class="p-b-32">
                <div class="size-a-105 bg-11"></div>
                <form class="flex-row">
                  <h4
                    class="t1-s-4 cl-3 p-tb-10"
                    style="font-weight: bold; margin-left: 200px"
                  >
                    景點
                  </h4>

                  <h4
                    class="t1-s-4 cl-3 p-tb-10"
                    style="font-weight: bold; margin-left: 350px"
                  >
                    地址
                  </h4>
                </form>
                <div class="size-a-105 bg-11"></div>
                <div id="CLScene">
                  <ul class="p-t-22">
                    <li class="flex-wr-sb-c bo-b-1 bcl-14 m-b-18">
                      <a
                        href="tripy-SceneInfo.html"
                        class="t1-s-2 cl-5 hov-link2 trans-02 p-tb-3"
                      >
                        <span name="left" style="margin-left: 20px"> </span>
                        <span style="position: absolute; left: 200px">
                          安平古堡
                        </span>

                        <span style="position: absolute; left: 530px">
                          台南市安平區國勝路82號
                        </span>
                      </a>
                    </li>
                    <li class="flex-wr-sb-c bo-b-1 bcl-14 m-b-18" id="tainan_2">
                      <a
                        href="tripy-SceneInfo.html"
                        class="t1-s-2 cl-5 hov-link2 trans-02 p-tb-3"
                      >
                        <span name="left" style="margin-left: 20px"> </span>
                        <span
                          style="position: absolute; left: 200px"
                          id="tainan_2_name"
                        >
                          赤崁樓
                        </span>

                        <span style="position: absolute; left: 530px">
                          台南市中西區民族路二段212號
                        </span>
                      </a>
                      <button onclick="handleDeleteClick()">刪除</button>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!--===============================================================================================-->
    <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/animsition/js/animsition.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/bootstrap/js/popper.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/revolution/js/jquery.themepunch.tools.min.js"></script>
    <script src="vendor/revolution/js/jquery.themepunch.revolution.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.video.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.carousel.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.actions.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.kenburn.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.navigation.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.migration.min.js"></script>
    <script src="vendor/revolution/js/extensions/revolution.extension.parallax.min.js"></script>
    <script src="js/revo-custom.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/select2/select2.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/parallax100/parallax100.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/waypoint/jquery.waypoints.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/countterup/jquery.counterup.min.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/slick/slick.min.js"></script>
    <script src="js/slick-custom.js"></script>
    <!--===============================================================================================-->
    <script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
    <!--===============================================================================================-->
    <script src="js/main.js"></script>
    <!--===============================================================================================-->
    <!-- SweetAlert的JS套件 -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script>
      //取得網址參數
      var url_string = window.location.href;
      var url = new URL(url_string);
      var id = url.searchParams.get("id");

      function getCLItem(id) {
        // 發出POST的GET請求取得所有會員列表
        $.ajax({
          type: "GET", //注意！！
          url: "http://localhost:8090/NCU_MIS_SA/api/collectionItem.do",
          crossDomain: true,
          cache: false,
          dataType: "json",
          data: { list_id: id },
          timeout: 10000,
          success: function (response) {
            if (response.status == 200) {
              console.log(response.response.data);
              updateTable(response.response.data.scene_info);
              updateSQLTable(response);
            }
            console.log(response);
            console.log(response.data);
            console.log(response.response.data);
          },
          error: function () {
            swal("無法連線到伺服器！");
          },
        });
      }

      getCLItem(id);

      function updateTable(data) {
        $("#CLScene").empty();
        var CLScene_html = "";
        $.each(data, function (index, value) {
          CLScene_html +=
            "<li class='flex-wr-sb-c bo-b-1 bcl-14 m-b-18' id='tainan_2'>" +
            "<a href='tripy-SceneInfo.html?id=" +
            value["id"] +
            "' class='t1-s-2 cl-5 hov-link2 trans-02 p-tb-3'>" +
            "<span name='left' style='margin-left: 20px'> </span>" +
            "<span style='position: absolute; left: 200px'>" +
            value.scene.data +
            "</span>" +
            "<span style='position: absolute; left: 530px'>" +
            value.scene.address +
            "</span>" +
            "</a>" +
            "<button onclick='handleDeleteClick()'>刪除</button>" +
            "</li>";
        });

        $("#CLScene").append(CLScene_html);
      }

      function updateSQLTable(data) {
        $("#sql_log > tbody").empty();
        var time = (data.time / 1000000).toFixed(2);
        var table_html = "";

        sql_num = 0;
        sql_num += 1;

        table_html += "<tr>";
        table_html += "<td>" + sql_num + "</td>";
        table_html += "<td>" + data.sql + "</td>";
        table_html += '<td style="text-align: right">' + "0" + "</td>";
        table_html += '<td style="text-align: right">' + data.row + "</td>";
        table_html += '<td style="text-align: right">' + data.row + "</td>";
        table_html += '<td style="text-align: right">' + time + "</td>";
        table_html += "</tr>";
        $("#sql_log > tbody").append(table_html);
        $("#sql_summary").html(
          "(default) " + data.row + " queries took " + time + " ms"
        );
      }
      $(document).ready(function () {
        getCLItem(id);
      });
    </script>
  </body>
</html>
